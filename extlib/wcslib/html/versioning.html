<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>WCSLIB: WCSLIB version numbers</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">WCSLIB
   &#160;<span id="projectnumber">7.7</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',false,false,'search.php','Search');
});
/* @license-end */</script>
<div id="main-nav"></div>
<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="index.html">WCSLIB 7.7 and PGSBOX 7.7</a></li>  </ul>
</div>
</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">WCSLIB version numbers </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The full WCSLIB/PGSBOX version number is composed of three integers in fields separated by periods:</p>
<ul>
<li><p class="startli"><b>Major</b>: the first number changes only when the ABI changes, a rare occurence (and the API never changes). Typically, the ABI changes when the contents of a struct change. For example, the contents of the <em>linprm</em> struct changed between 4.25.1 and 5.0.</p>
<p class="startli">In practical terms, this number becomes the major version number of the WCSLIB sharable library, <b>libwcs.so.<em>&lt;major&gt;</em></b>. To avoid possible segmentation faults or bus errors that may arise from the altered ABI, the dynamic (runtime) linker will not allow an application linked to a sharable library with a particular major version number to run with that of a different major version number.</p>
<p class="startli">Application code must be recompiled and relinked to use a newer version of the WCSLIB sharable library with a new major version number.</p>
</li>
<li><p class="startli"><b>Minor</b>: the second number changes when existing code is changed, whether due to added functionality or bug fixes. This becomes the minor version number of the WCSLIB sharable library, <b>libwcs.so.<em>&lt;major&gt;.&lt;minor&gt;</em></b>.</p>
<p class="startli">Because the ABI remains unchanged, older applications can use the new sharable library without needing to be recompiled, thus obtaining the benefit of bug fixes, speed enhancements, etc.</p>
<p class="startli">Application code written subsequently to use the added functionality would, of course, need to be recompiled.</p>
</li>
<li><p class="startli"><b>Patch</b>: the third number, which is often omitted, indicates a change to the build procedures, documentation, or test suite. It may also indicate changes to the utility applications (<em>wcsware</em>, <em>HPXcvt</em>, etc.), including the addition of new ones.</p>
<p class="startli">However, the library itself, including the definitions in the header files, remains unaltered, so there is no point in recompiling applications.</p>
</li>
</ul>
<p>The following describes what happens (or should happen) when WCSLIB's installation procedures are used on a typical Linux system using the GNU gcc compiler and GNU linker.</p>
<p>The sharable library should be installed as libwcs.so.<em>&lt;major&gt;.&lt;minor&gt;</em>, say libwcs.so.5.4 for concreteness, and a number of symbolic links created as follows:</p>
<pre class="fragment">  libwcs.so     -&gt; libwcs.so.5
  libwcs.so.5   -&gt; libwcs.so.5.4
  libwcs.so.5.4
</pre><p>When an application is linked using '-lwcs', the linker finds libwcs.so and the symlinks lead it to libwcs.so.5.4. However, that library's SONAME is actually 'libwcs.so.5', by virtue of linker options used when the sharable library was created, as can be seen by running</p>
<pre class="fragment">  readelf -d libwcs.so.5.4
</pre><p>Thus, when an application that was compiled and linked to libwcs.so.5.4 begins execution, the dynamic linker, ld.so, will attempt to bind it to libwcs.so.5, as can be seen by running</p>
<pre class="fragment">  ldd &lt;application&gt;
</pre><p>Later, when WCSLIB 5.5 is installed, the library symbolic links will become</p>
<pre class="fragment">  libwcs.so     -&gt; libwcs.so.5
  libwcs.so.5   -&gt; libwcs.so.5.5
  libwcs.so.5.4
  libwcs.so.5.5
</pre><p>Thus, even without being recompiled, existing applications will link automatically to libwcs.so.5.5 at runtime. In fact, libwcs.so.5.4 would no longer be used and could be deleted.</p>
<p>If WCSLIB 6.0 were to be installed at some later time, then the libwcs.so.6 libraries would be used for new compilations. However, the libwcs.so.5 libraries must be left in place for existing executables that still require them:</p>
<pre class="fragment">  libwcs.so     -&gt; libwcs.so.6
  libwcs.so.6   -&gt; libwcs.so.6.0
  libwcs.so.6.0
  libwcs.so.5   -&gt; libwcs.so.5.5
  libwcs.so.5.5
</pre> </div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Mon Jul 12 2021 16:37:35 for WCSLIB by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
